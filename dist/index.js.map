{"version":3,"sources":["webpack://virtual-block/webpack/universalModuleDefinition","webpack://virtual-block/webpack/bootstrap","webpack://virtual-block/./src/VirtualBlock.vue","webpack://virtual-block/./node_modules/vue-loader/lib/runtime/component-normalizer.js","webpack://virtual-block/./src/VirtualBlock.vue?5d69","webpack://virtual-block/./src/VirtualBlock.vue?d2b3","webpack://virtual-block/./src/index.js"],"names":["props","data","type","Array","required","height","Number","fixedBlockHeight","pageMode","Boolean","default","viewportBegin","viewportEnd","offsetTop","offsetBot","renderList","transformedData","watch","handler","newVal","oldVal","computeTransformedData","$nextTick","$refs","vl","scrollTop","handleScroll","immediate","window","addEventListener","removeEventListener","created","mounted","updateVb","destroyed","methods","oriArr","fixedRowHeight","curHeight","rt","forEach","item","push","pageYOffset","requestAnimationFrame","binarySearchLowerBound","s","arr","lo","hi","length","mid","binarySearchUpperBound","e","fixedBlockHeightLowerBound","sAdjusted","computedStartIndex","fixedBlockHeightUpperBound","eAdjusted","compuedEndIndex","Math","ceil","findBlocksInViewport","heightArr","blockArr","vlOffset","slice","viewportHeight","innerHeight","computed","containerStyle","plugin","install","Vue","options","component"],"mappings":"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;AACNC,sBADM,4BACW;AACb,gCACQ,CAAC,KAAK9D,QAAN,IAAkB,EAACH,QAAW,KAAKA,MAAhB,OAAD,EAD1B,EAEQ,CAAC,KAAKG,QAAN,IAAkB,EAAC,cAAe,QAAhB,EAF1B;AAIH;AANK;AAhPC,C;;;;;;;;;;;;;AChBf;AAAA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACpGA;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,wBAAwB,oCAAoC,kBAAkB,IAAI,yBAAyB,aAAa,QAAQ,+BAA+B,EAAE,qDAAqD,iBAAiB,6BAA6B,6EAA6E,EAAE,yBAAyB,UAAU,MAAM,wBAAwB,QAAQ,+BAA+B,EAAE;AACthB;;;;;;;;;;;;;;;;;;ACDA;AAAA;AACA;AACA;AACA;AACiP;AACjP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;ACxBA;;;;;;AAEA,IAAM+D,SAAS;AACXC,WADW,mBACHC,GADG,EACEC,OADF,EACW;AAClBD,YAAIE,SAAJ,CAAc,cAAd;AACH;AAHU,CAAf;;kBAMeJ,M","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"virtual-block\"] = factory();\n\telse\n\t\troot[\"virtual-block\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    props: {\n        // data is required\n        // height is required if pageMode is set to false\n        // when fixedBlockHeight is specified, the height key in data will be ignored\n        data: {\n            type: Array,\n            required: true\n        },\n        height: {\n            type: Number\n        },\n        fixedBlockHeight: {\n            type: Number\n        },\n        pageMode: {\n            type: Boolean,\n            default: true\n        }\n    },\n\n    data() {\n        return {\n            viewportBegin: 0,\n            viewportEnd: this.height,\n            offsetTop: 0,\n            offsetBot: 0,\n            renderList: [],\n            transformedData: []\n        }\n    },\n    watch: {\n        data: {\n            handler: function(newVal, oldVal) {\n                this.computeTransformedData(newVal);\n                // code blow used to update view when data changed\n                if (oldVal) {\n                    this.$nextTick(\n                        () => {\n                            // reset the scrollTop for container\n                            // update view by handleScroll()\n                            this.$refs.vl.scrollTop = 0;\n                            this.handleScroll();\n                        }\n                    );\n                }\n            },\n            immediate: true // when not in page mode, initailize data here\n        },\n        pageMode(newVal) {\n            if (newVal) {\n                window.addEventListener('scroll', this.handleScroll);\n            } else {\n                window.removeEventListener('scroll', this.handleScroll);\n            }\n            // recompute transformed data when pageMode changed\n            this.computeTransformedData(this.data);\n            this.$nextTick(\n                () => {\n                    // reset the scrollTop for container\n                    // update view by handleScroll()\n                    this.$refs.vl.scrollTop = 0;\n                    this.handleScroll()\n                }\n            );\n        },\n        fixedBlockHeight() {\n            // update view when fixedBlockHeight changed\n            this.handleScroll();\n        }\n    },\n    created() {\n        if (this.pageMode) {\n            // add scroll onto window\n            window.addEventListener('scroll', this.handleScroll);\n        }\n    },\n    mounted() {\n        if (this.pageMode) {\n            // in page mode, initialize transformed data here\n            this.computeTransformedData(this.data);\n        }\n        // initialize view by calling updateVb\n        this.updateVb(0);\n    },\n    destroyed() {\n        if (this.pageMode) {\n            window.removeEventListener('scroll', this.handleScroll);\n        }\n    },\n    methods: {\n        computeTransformedData(oriArr) {\n            // compute accumulative height value for each block\n            // note the function related to the variable 'pageMode'\n            // and when fixedRowHeight is specified, transformedData is not needed\n            if (!this.fixedRowHeight && ((this.pageMode && this.$refs.vl) || !this.pageMode)) {\n                let curHeight = this.pageMode ? this.$refs.vl.offsetTop : 0;\n                let rt = [curHeight];\n                oriArr.forEach(\n                    item => {\n                        curHeight += item.height;\n                        rt.push(curHeight);\n                    }\n                );\n                this.transformedData = rt;\n            }\n        },\n        handleScroll() {\n            // scrollTop is relative to the varible pageMode\n            const scrollTop = this.pageMode ? window.pageYOffset : this.$refs.vl.scrollTop;\n            // use requestAnimationFrame to ensure smooth scrolling visual effects\n            window.requestAnimationFrame(\n                () => {\n                    this.updateVb(scrollTop);\n                }\n            );\n        },\n        binarySearchLowerBound(s, arr) {\n            // used to search the lower bound in-viewport index for data array\n            // when height is not fixed\n            let lo = 0;\n            let hi = arr.length - 1;\n            let mid;\n            while(lo <= hi) {\n                // integer division\n                mid = ~~((hi + lo) / 2);\n                if (arr[mid] > s) {\n                    if (mid === 0) {\n                        // start position less than the smallest element in arr\n                        return 0;\n                    } else {\n                        hi = mid - 1;\n                    }\n                } else if (arr[mid] < s) {\n                    if (mid + 1 < arr.length) {\n                        if (arr[mid + 1] > s) {\n                            return mid;\n                        } else {\n                            // normal flow\n                            lo = mid + 1;\n                        }\n                    } else {\n                        // not a valid start position\n                        // start position > total height\n                        return -1;\n                    }\n                } else {\n                    // only return the matched lower bound index\n                    // may be modified later for smooth\n                    return mid;\n                }\n            }\n        },\n        binarySearchUpperBound(e, arr) {\n            // used to search the upper bound in-viewport index for data array\n            // when height is not fixed\n            let lo = 0;\n            let hi = arr.length - 1;\n            let mid;\n            while(lo <= hi) {\n                mid = ~~((hi + lo) / 2);\n                if (arr[mid] > e) {\n                    if (mid > 0) {\n                        if (arr[mid - 1] < e) {\n                            return mid;\n                        } else {\n                            // normal flow\n                            hi = mid - 1;\n                        }\n                    } else {\n                        // not a valid end position\n                        // end position < view port start position\n                        return -1;\n                    }\n                } else if (arr[mid] < e) {\n                    if (mid === arr.length - 1) {\n                        // end position greater than the biggest element in arr\n                        return arr.length - 1;\n                    } else {\n                        lo = mid + 1;\n                    }\n                } else {\n                    // lower bound should return previous block\n                    // the slice func handles the index offset issue\n                    return mid;\n                }\n            }\n        },\n        fixedBlockHeightLowerBound(s, fixedBlockHeight) {\n            // used to compute the lower bound in-viewport index for data array\n            // when in fixed height mode\n            const sAdjusted = this.pageMode ? s - this.$refs.vl.offsetTop : s;\n            const computedStartIndex = ~~(sAdjusted / fixedBlockHeight);\n            return computedStartIndex >= 0 ? computedStartIndex : 0;\n        },\n        fixedBlockHeightUpperBound(e, fixedBlockHeight) {\n            // used to compute the upper bound in-viewport index for data array\n            // when in fixed height mode\n            const eAdjusted = this.pageMode ? e - this.$refs.vl.offsetTop : e;\n            const compuedEndIndex = Math.ceil(eAdjusted / fixedBlockHeight);\n            return compuedEndIndex <= this.data.length ? compuedEndIndex : this.data.length;\n        },\n        findBlocksInViewport(s, e, heightArr, blockArr) {\n            if (s < e) {\n                const lo = this.fixedBlockHeight ? \n                           this.fixedBlockHeightLowerBound(s, this.fixedBlockHeight) :\n                           this.binarySearchLowerBound(s, heightArr);\n                const hi = this.fixedBlockHeight ? \n                           this.fixedBlockHeightUpperBound(e, this.fixedBlockHeight) :\n                           this.binarySearchUpperBound(e, heightArr);\n\n                var vlOffset = this.pageMode ? this.$refs.vl.offsetTop : 0;\n                // set top spacer\n                if(this.fixedBlockHeight) {\n                    this.offsetTop = lo >= 0 ? lo * this.fixedBlockHeight : 0;\n                } else {\n                    this.offsetTop = lo >= 0 ? heightArr[lo] - vlOffset : 0;\n                }\n                // set bot spacer\n                if (this.fixedBlockHeight) {\n                    this.offsetBot = hi >= 0 ? (blockArr.length - hi ) * this.fixedBlockHeight : 0;\n                } else {\n                    this.offsetBot = hi >= 0 ? heightArr[heightArr.length - 1] - heightArr[hi] : 0;\n                }\n                // return the sliced the data array\n                return blockArr.slice(lo, hi);;\n            } else {\n                this.offsetTop = 0;\n                this.offsetBot = 0;\n                return [];\n            }\n        },\n        updateVb(scrollTop) {\n            // compute the viewport start position and end position based on the scrollTop value\n            const viewportHeight = this.pageMode ? window.innerHeight : this.height;\n            this.viewportBegin = scrollTop;\n            this.viewportEnd = scrollTop + viewportHeight;\n            this.renderList = this.findBlocksInViewport(this.viewportBegin, this.viewportEnd, this.transformedData, this.data);\n        }\n    },\n    computed: {\n        containerStyle() {\n            return {\n                ...(!this.pageMode && {height: `${this.height}px`}),\n                ...(!this.pageMode && {'overflow-y' : 'scroll'})\n            }\n        }\n    }\n}\n","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  scriptExports = scriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof scriptExports.default\n  if (type === 'object' || type === 'function') {\n    scriptExports = scriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () { injectStyles.call(this, this.$root.$options.shadowRoot) }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._g({ref:\"vl\",style:(_vm.containerStyle)},_vm.pageMode ? {} : {scroll: _vm.handleScroll}),[_c('div',{style:({height: (_vm.offsetTop + \"px\")})}),_vm._v(\" \"),_vm._l((_vm.renderList),function(item){return _c('div',{key:(\"\" + (item.id)),style:({height: ((_vm.fixedBlockHeight ? _vm.fixedBlockHeight : item.height) + \"px\")})},[_vm._t(\"default\",null,{data:item})],2)}),_vm._v(\" \"),_c('div',{style:({height: (_vm.offsetBot + \"px\")})})],2)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./VirtualBlock.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./VirtualBlock.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-54c2af52\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"1\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./VirtualBlock.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","import VirtualBlock from './VirtualBlock.vue';\n\nconst plugin = {\n    install(Vue, options) {\n        Vue.component(\"VirtualBlock\", VirtualBlock);\n    }\n}\n\nexport default plugin;"],"sourceRoot":""}